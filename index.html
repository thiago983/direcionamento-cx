<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Dimensionamento CX</title>

<style>
body {
  margin: 0;
  font-family: Inter, Arial, sans-serif;
  background: #f2f4f5;
  color: #1f2d2b;
}

h2 {
  margin: 16px;
}

.container {
  display: flex;
  gap: 16px;
  padding: 16px;
}

/* ===== Pessoas ===== */
.people {
  width: 30%;
  background: #ffffff;
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,.08);
}

.people-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.person {
  background: #205452;
  color: #ffffff;
  padding: 8px 10px;
  border-radius: 6px;
  cursor: grab;
  font-size: 13px;
  user-select: none;
  position: relative;

  /* ðŸ”¹ tamanho padrÃ£o */
  width: 140px;
  text-align: center;
  line-height: 1.2;
  white-space: normal;
  word-break: break-word;
}

.person.fixed {
  outline: 2px solid #ffd166;
}

/* ðŸ”’ cadeado no canto superior direito */
.person.fixed::after {
  content: "ðŸ”’";
  position: absolute;
  top: -6px;
  right: -6px;
  background: #ffffff;
  border-radius: 50%;
  padding: 2px 4px;
  font-size: 11px;
}

/* ===== Escopos ===== */
.scopes {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
}

.scope {
  background: #7caf94;
  border-radius: 10px;
  padding: 10px;
  display: flex;
  flex-direction: column;
}

/* ðŸŸ  FÃ©rias */
.scope.ferias {
  background: #f0ac63;
}

.scope h3 {
  margin: 0 0 8px 0;
  text-align: center;
  font-size: 14px;
  color: #ffffff;
}

.dropzone {
  flex: 1;
  background: rgba(255,255,255,.15);
  border-radius: 6px;
  padding: 8px;
  min-height: 120px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.dropzone.hover {
  outline: 2px dashed #ffffff;
  background: rgba(255,255,255,.25);
}

/* ðŸ‘¤ pessoa dentro do escopo: sempre 1 linha */
.dropzone .person {
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: left;
  padding-right: 22px;
}

/* ===== AÃ§Ãµes ===== */
.actions {
  padding: 16px;
  display: flex;
  gap: 8px;
}

button {
  padding: 8px 14px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-weight: 600;
}

.primary {
  background: #205452;
  color: #fff;
}

.secondary {
  background: #e0e0e0;
}

/* ===== Resultado ===== */
#result {
  margin: 16px;
  padding: 12px;
  background: #ffffff;
  border-radius: 10px;
  white-space: pre-line;
  box-shadow: 0 2px 6px rgba(0,0,0,.08);
  font-size: 14px;
}
</style>
</head>

<body>

<h2>Dimensionamento DiÃ¡rio</h2>

<div class="container">

  <div class="people">
    <h3>Pessoas</h3>
    <div class="people-list" id="people"></div>
  </div>

  <div class="scopes" id="scopes"></div>

</div>

<div class="actions">
  <button class="primary" onclick="generate()">Gerar lista</button>
  <button class="secondary" onclick="copyAll()">Copiar lista</button>
  <button class="secondary" onclick="resetAll()">Resetar</button>
</div>

<div id="result"></div>

<script>
const peopleNames = [
"Camila Marigo","Cauane Wiggberto","Daniela Barral","Elisabete Pinho",
"Erick Muniz","Gisele Lopes","Jenifer Alcantara","JoÃ£o Pedro Finamore",
"Johana Geisa","Karina Tosta","Leonardo Santiago","Lorenzo Moreira",
"Luisa Rodrigues","Luiz Felipe Firmo","Maria Clara Periard",
"Natanael Cruz","Rayanne Rodrigues","Samantha MarÃ§al","Jessyca Rodrigues",
"Rayssa MagalhÃ£es Farias","Dayane da Silva Santos","Matheus AndrÃ©",
"Lais Rodrigues","Marianne Belmiro","HÃ©rica Oliveira","Julia Prazeres",
"Wesley Freitas","Milena Cabral","Thariny Portela","Patricia Rodrigues",
"Pedro Bento","Ana Luiza","Kelly Ribeiro","Nayara Marinho","Ana FlÃ¡via",
"Barbara Oliveira","Lucas Resende"
];

const scopes = [
"Manual WPP","Manual Email","Manual Chat",
"Social","Voy","Backoffice","Reclame Aqui",
"FÃ©rias / LicenÃ§a / Outros"
];

let dragged = null;

function init() {
  const people = document.getElementById("people");

  peopleNames.forEach(name => {
    const p = document.createElement("div");
    p.className = "person";
    p.textContent = name;
    p.draggable = true;

    p.ondragstart = () => dragged = p;
    p.ondragend = () => dragged = null;

    p.ondblclick = () => {
      p.classList.toggle("fixed");
      saveState();
    };

    people.appendChild(p);
  });

  const scopesEl = document.getElementById("scopes");

  scopes.forEach(s => {
    const card = document.createElement("div");
    card.className = "scope";
    if (s.includes("FÃ©rias")) card.classList.add("ferias");

    const h = document.createElement("h3");
    h.textContent = s;

    const dz = document.createElement("div");
    dz.className = "dropzone";
    if (s.includes("FÃ©rias")) dz.dataset.ignore = "true";

    dz.ondragover = e => {
      e.preventDefault();
      dz.classList.add("hover");
    };
    dz.ondragleave = () => dz.classList.remove("hover");
    dz.ondrop = e => {
      e.preventDefault();
      dz.classList.remove("hover");
      if (dragged) {
        dz.appendChild(dragged);
        saveState();
      }
    };

    card.appendChild(h);
    card.appendChild(dz);
    scopesEl.appendChild(card);
  });

  loadState();
}

function generate() {
  let out = "";
  document.querySelectorAll(".scope").forEach(scope => {
    const dz = scope.querySelector(".dropzone");
    if (dz.dataset.ignore) return;

    const names = [...dz.children].map(p => p.textContent);
    if (!names.length) return;

    out += "- " + scope.querySelector("h3").textContent + "\n";
    names.forEach(n => out += n + "\n");
    out += "\n";
  });
  document.getElementById("result").textContent = out;
  saveState();
}

function copyAll() {
  const text = document.getElementById("result").textContent;
  if (!text.trim()) return alert("Gere a lista antes ðŸ™‚");

  const t = document.createElement("textarea");
  t.value = text;
  document.body.appendChild(t);
  t.select();
  document.execCommand("copy");
  document.body.removeChild(t);
  alert("Lista copiada!");
}

function resetAll() {
  document.querySelectorAll(".person").forEach(p => {
    if (!p.classList.contains("fixed")) {
      document.getElementById("people").appendChild(p);
    }
  });
  saveState();
}

function saveState() {
  const state = {
    fixed: [...document.querySelectorAll(".person.fixed")].map(p => p.textContent),
    scopes: {}
  };

  document.querySelectorAll(".scope").forEach(scope => {
    const name = scope.querySelector("h3").textContent;
    const dz = scope.querySelector(".dropzone");
    state.scopes[name] = [...dz.children].map(p => p.textContent);
  });

  localStorage.setItem("dimensionamento", JSON.stringify(state));
}

function loadState() {
  const raw = localStorage.getItem("dimensionamento");
  if (!raw) return;

  const state = JSON.parse(raw);

  document.querySelectorAll(".person").forEach(p => {
    if (state.fixed.includes(p.textContent)) {
      p.classList.add("fixed");
    }
  });

  Object.entries(state.scopes).forEach(([scope, names]) => {
    const dz = [...document.querySelectorAll(".scope")]
      .find(s => s.querySelector("h3").textContent === scope)
      ?.querySelector(".dropzone");

    names.forEach(n => {
      const p = [...document.querySelectorAll(".person")]
        .find(x => x.textContent === n);
      if (p && dz) dz.appendChild(p);
    });
  });
}

init();
</script>
</body>
</html>


